<!-- infinite-scroll.html -->
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Infinite Scroll (IntersectionObserver)</title>
  <style>
    body{font-family:sans-serif;padding:10px}
    .item{height:120px;border:1px solid #ddd;margin:8px;padding:8px}
  </style>
</head>
<body>
  <h3>Infinite Scroll Demo</h3>
  <div id="container"></div>
  <div id="sentinel" style="height:20px"></div>

  <script>
    const container = document.getElementById('container');
    let page = 0;

    function addItems(n=10) {
      const frag = document.createDocumentFragment();
      for (let i=0;i<n;i++){
        const div = document.createElement('div');
        div.className = 'item';
        div.textContent = `Item ${(page*10) + i + 1}`;
        frag.appendChild(div);
      }
      container.appendChild(frag);
    }

    addItems(); // initial
    page++;

    const obs = new IntersectionObserver(entries => {
      if (entries[0].isIntersecting) {
        // load more
        addItems();
        page++;
        // optional: stop after some pages
        if (page > 10) obs.unobserve(document.getElementById('sentinel'));
      }
    }, { root: null, rootMargin: '0px', threshold: 1.0 });

    obs.observe(document.getElementById('sentinel'));
  </script>
</body>
</html>
